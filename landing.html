<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.O.M.</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#9670;</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@300;400&display=swap');

        :root {
            --black: #0a0a0a;
            --dark: #111;
            --gray: #1a1a1a;
            --text: #e0e0e0;
            --dim: #888;
            --accent: #d4af37;
            --white: #f5f5f5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        ::selection {
            background: var(--accent);
            color: var(--black);
        }

        body {
            font-family: 'EB Garamond', serif;
            background: var(--black);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.7;
        }

        .hidden { display: none !important; }

        /* === CICADA AESTHETIC === */
        .phase {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            position: relative;
        }

        /* Scanlines overlay */
        .phase::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.1) 0px,
                rgba(0,0,0,0.1) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 1000;
        }

        /* === PHASE 1: THE SIGIL (Mystery Box) === */
        #phase-sigil {
            cursor: pointer;
        }

        .sigil-container {
            text-align: center;
            max-width: 600px;
        }

        .sigil {
            font-size: 6rem;
            color: var(--accent);
            margin-bottom: 40px;
            animation: breathe 4s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(212, 175, 55, 0.3));
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .epigraph {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--text);
            margin-bottom: 30px;
            letter-spacing: 0.5px;
        }

        .scramble-text {
            display: inline;
        }

        .scramble-char {
            display: inline-block;
            min-width: 0.5em;
        }

        .scramble-char.scrambling {
            color: var(--accent);
            opacity: 0.7;
        }

        .epigraph-source {
            font-size: 0.85rem;
            color: var(--dim);
            margin-top: 10px;
            font-style: normal;
        }

        .instruction {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-top: 50px;
            opacity: 0.8;
        }

        /* === PHASE 1.5: APOHORIA BRIEFING === */
        .briefing-container {
            max-width: 550px;
            text-align: center;
        }

        .briefing-text {
            font-size: 1.1rem;
            color: var(--dim);
            margin-bottom: 25px;
        }

        .briefing-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 40px;
        }

        /* === PHASE 2: THE TEST (Self-Selection + Commitment) === */
        #phase-test {
            background: var(--black);
        }

        .test-container {
            max-width: 500px;
            text-align: center;
        }

        .test-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--dim);
            letter-spacing: 4px;
            margin-bottom: 40px;
        }

        .test-question {
            font-size: 1.4rem;
            color: var(--white);
            margin-bottom: 15px;
            font-weight: 400;
        }

        .test-hint {
            font-size: 0.9rem;
            color: var(--dim);
            font-style: italic;
            margin-bottom: 40px;
        }

        .cipher-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            color: var(--accent);
            letter-spacing: 8px;
            padding: 25px;
            background: var(--dark);
            border: 1px solid var(--gray);
            margin-bottom: 30px;
            user-select: all;
        }

        .input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .answer-input {
            width: 100%;
            padding: 15px 20px;
            background: transparent;
            border: 1px solid var(--gray);
            color: var(--white);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            text-align: center;
            letter-spacing: 2px;
            outline: none;
            transition: border-color 0.3s;
        }

        .answer-input:focus {
            border-color: var(--accent);
        }

        .answer-input::placeholder {
            color: var(--dim);
        }

        .submit-btn {
            padding: 12px 40px;
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--black);
        }

        .feedback {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            margin-top: 20px;
            height: 20px;
        }

        .feedback.error { color: #8b0000; }
        .feedback.partial { color: var(--accent); }

        .hint-section {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid var(--gray);
        }

        .hint-readme-popup {
            margin-bottom: 20px;
        }

        .readme-box {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 25px;
            text-align: center;
        }

        .readme-title {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 15px;
        }

        .readme-text {
            display: block;
            font-size: 0.9rem;
            color: var(--text);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .readme-warning {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: #cc4444;
            margin-bottom: 20px;
            letter-spacing: 0.5px;
        }

        .readme-btn {
            padding: 10px 30px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .readme-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .hint-prompt {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .hint-prompt:hover {
            opacity: 1;
        }

        .hint-prompt.attention {
            animation: hintPulse 2s ease-in-out infinite;
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .hint-icon {
            color: var(--accent);
            font-size: 1rem;
        }

        .hint-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--dim);
            letter-spacing: 1px;
        }

        .hint-revealed {
            text-align: center;
        }

        .hint-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .hint-content {
            display: block;
            font-style: italic;
            color: var(--text);
            font-size: 0.95rem;
        }

        .hint-prompt-2 {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .hint-audio {
            margin-top: 20px;
            text-align: center;
        }

        .audio-player {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            padding: 15px 20px;
            background: var(--dark);
            border: 1px solid var(--gray);
        }

        .play-btn {
            width: 40px;
            height: 40px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .audio-progress {
            flex: 1;
            max-width: 200px;
            height: 4px;
            background: var(--gray);
            cursor: pointer;
        }

        .audio-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            transition: width 0.1s;
        }

        .audio-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--dim);
            min-width: 35px;
        }

        .hint-prompt-3 {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .hint-prompt-3 .hint-text {
            color: #8b4444;
        }

        .hint-confirm {
            margin-top: 20px;
        }

        .confirm-box {
            background: var(--dark);
            border: 1px solid #3d0000;
            padding: 25px;
            text-align: center;
        }

        .confirm-title {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: #8b0000;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }

        .confirm-text {
            display: block;
            font-size: 0.9rem;
            color: var(--text);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 10px 25px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .confirm-btn.cancel {
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--text);
        }

        .confirm-btn.cancel:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--black);
        }

        .confirm-btn.forfeit {
            background: transparent;
            border: 1px solid #8b0000;
            color: #8b4444;
        }

        .confirm-btn.forfeit:hover {
            background: #8b0000;
            color: var(--white);
        }

        .hint-forfeited {
            text-align: center;
            padding: 30px;
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid #3d0000;
        }

        .forfeit-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #8b0000;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }

        .forfeit-answer {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            color: var(--dim);
            margin-bottom: 15px;
        }

        .forfeit-text {
            display: block;
            font-style: italic;
            color: #8b4444;
            font-size: 0.9rem;
        }

        /* === PHASE 3: THE REVELATION (Information Gap + Authority) === */
        #phase-reveal {
            background: var(--black);
        }

        .reveal-container {
            max-width: 600px;
            text-align: center;
        }

        .reveal-sigil {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 30px;
        }

        .reveal-title {
            font-size: 1.8rem;
            color: var(--white);
            margin-bottom: 20px;
            font-weight: 400;
        }

        .reveal-text {
            font-size: 1rem;
            color: var(--text);
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .reveal-quote {
            font-style: italic;
            color: var(--dim);
            padding: 20px 30px;
            border-left: 1px solid var(--accent);
            margin: 30px 0;
            text-align: left;
        }

        .classified-block {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 25px;
            margin: 30px 0;
            text-align: left;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .classified-line {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray);
        }

        .classified-line:last-child { border-bottom: none; }

        .classified-key { color: var(--dim); }
        .classified-val { color: var(--text); }
        .classified-val.gold { color: var(--accent); }
        .classified-val.redacted {
            color: var(--dim);
            text-decoration: line-through;
        }

        .continue-btn {
            display: inline-block;
            margin-top: 30px;
            padding: 15px 50px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 3px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s;
        }

        .continue-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        /* === PHASE 4: THE CHANNEL (Endowment + Loss Aversion) === */
        #phase-channel {
            background: var(--black);
        }

        .channel-container {
            max-width: 550px;
            text-align: center;
        }

        .channel-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--dim);
            letter-spacing: 4px;
            margin-bottom: 30px;
        }

        .channel-sigil {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .channel-title {
            font-size: 1.5rem;
            color: var(--white);
            margin-bottom: 15px;
        }

        .channel-text {
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .warning-box {
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid #3d0000;
            padding: 15px 20px;
            margin: 25px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: #8b4444;
        }

        .token-display {
            background: var(--dark);
            border: 1px solid var(--accent);
            padding: 20px;
            margin: 25px 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .token-label {
            font-size: 0.6rem;
            color: var(--dim);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .token-value {
            font-size: 1.1rem;
            color: var(--accent);
            letter-spacing: 3px;
            word-break: break-all;
        }

        .token-copy {
            font-size: 0.6rem;
            color: var(--dim);
            letter-spacing: 1px;
            margin-top: 12px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .token-copy:hover {
            color: var(--accent);
        }

        .token-copy.copied {
            color: var(--accent);
        }

        .telegram-link {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: var(--accent);
            color: var(--black);
            padding: 15px 40px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 2px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .telegram-link:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
        }

        .profile-container {
            max-width: 450px;
            text-align: center;
        }

        .profile-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .profile-subheader {
            font-size: 1.1rem;
            color: var(--text);
            margin-bottom: 30px;
            font-style: italic;
        }

        .profile-grid {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 20px;
            margin-bottom: 25px;
            text-align: left;
        }

        .profile-line {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
        }

        .profile-line:last-child {
            border-bottom: none;
        }

        .profile-key {
            color: var(--dim);
            letter-spacing: 1px;
        }

        .profile-val {
            color: var(--text);
        }

        .profile-intro {
            text-align: center;
            margin-bottom: 25px;
        }

        .profile-intro p {
            font-size: 0.95rem;
            color: var(--text);
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .profile-intro .accent-text {
            color: var(--accent);
            font-weight: 500;
        }

        .profile-reassure {
            font-size: 1.05rem !important;
            color: var(--text) !important;
            font-style: italic;
            margin-top: 15px !important;
        }

        .gold-text {
            color: var(--accent);
        }

        /* === CALIBRATION (Mentalist) === */
        .calibration-container {
            max-width: 550px;
            text-align: center;
        }

        .calibration-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .calibration-subheader {
            font-size: 1rem;
            color: var(--dim);
            margin-bottom: 40px;
        }

        .calibration-step {
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cal-question {
            font-size: 1.2rem;
            color: var(--text);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .cal-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .cal-option {
            padding: 15px 25px;
            background: transparent;
            border: 1px solid var(--gray);
            color: var(--text);
            font-family: 'EB Garamond', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .cal-option:hover {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.05);
        }

        .cal-option.selected {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.1);
            color: var(--accent);
        }

        .reading-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 30px;
        }

        .reading-content {
            text-align: left;
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 30px;
            margin-bottom: 30px;
        }

        .reading-line {
            font-size: 1rem;
            color: var(--text);
            margin-bottom: 20px;
            line-height: 1.7;
            opacity: 0;
            animation: readingFade 0.8s ease forwards;
        }

        .reading-line:nth-child(1) { animation-delay: 0.5s; }
        .reading-line:nth-child(2) { animation-delay: 1.5s; }
        .reading-line:nth-child(3) { animation-delay: 2.5s; }
        .reading-line:nth-child(4) { animation-delay: 3.5s; }

        @keyframes readingFade {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .word-challenge-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 30px;
        }

        .word-challenge-text {
            font-size: 1.1rem;
            color: var(--text);
            line-height: 2;
            margin-bottom: 40px;
        }

        .word-challenge-text p {
            margin-bottom: 15px;
        }

        .word-highlight {
            color: var(--accent);
            font-weight: 500;
        }

        .reveal-dramatic {
            padding: 40px;
            background: var(--dark);
            border: 1px solid var(--accent);
            margin-bottom: 30px;
        }

        .reveal-text {
            font-size: 1rem;
            color: var(--dim);
            margin-bottom: 20px;
        }

        .reveal-word {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            color: var(--accent);
            letter-spacing: 8px;
            animation: revealPulse 2s ease-in-out infinite;
        }

        @keyframes revealPulse {
            0%, 100% { text-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
            50% { text-shadow: 0 0 40px rgba(212, 175, 55, 0.6); }
        }

        .reveal-sub {
            font-size: 0.9rem;
            color: var(--dim);
            margin-top: 20px;
            font-style: italic;
        }

        .word-input {
            width: 100%;
            padding: 20px;
            background: var(--black);
            border: 1px solid var(--gray);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 5px;
            outline: none;
            margin: 20px 0;
        }

        .word-input:focus {
            border-color: var(--accent);
        }

        .word-input::placeholder {
            color: var(--dim);
            letter-spacing: 3px;
        }

        .reveal-result {
            padding: 40px;
            text-align: center;
            animation: fadeInUp 0.5s ease;
        }

        .result-word {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            color: var(--accent);
            letter-spacing: 8px;
            margin-bottom: 20px;
        }

        .result-text {
            font-size: 1.1rem;
            color: var(--text);
            margin-bottom: 30px;
        }

        .result-fail-icon {
            font-size: 4rem;
            color: #8b0000;
            margin-bottom: 20px;
        }

        .result-fail-text {
            font-size: 1.2rem;
            color: #cc4444;
            margin-bottom: 15px;
        }

        .result-fail-sub {
            font-size: 1rem;
            color: var(--dim);
        }

        .profile-progress-section {
            margin-top: 30px;
            padding: 25px;
            background: var(--dark);
            border: 1px solid var(--gray);
        }

        .progress-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--accent);
            letter-spacing: 2px;
            margin-bottom: 15px;
            text-align: center;
        }

        .progress-bar-container {
            width: 100%;
            height: 6px;
            background: var(--black);
            border: 1px solid var(--gray);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), #f0d078);
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .progress-message {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text);
            text-align: center;
            min-height: 40px;
            line-height: 1.5;
        }

        .progress-message .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 12px;
            background: var(--accent);
            margin-left: 2px;
            animation: cursorBlink 0.8s infinite;
            vertical-align: middle;
        }

        @keyframes cursorBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .profile-warning {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: #cc4444;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .deployment-container {
            max-width: 500px;
            text-align: center;
        }

        .deployment-sigil {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 30px;
            animation: breathe 4s ease-in-out infinite;
        }

        .deployment-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 25px;
        }

        .deployment-text {
            font-size: 1rem;
            color: var(--text);
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .deployment-divider {
            width: 60px;
            height: 1px;
            background: var(--gray);
            margin: 0 auto 25px;
        }

        .deployment-classified {
            font-style: italic;
            color: var(--accent);
            font-size: 0.95rem;
            margin-bottom: 30px;
        }

        .deployment-warning {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 15px 20px;
            background: rgba(139, 68, 68, 0.1);
            border: 1px solid rgba(139, 68, 68, 0.3);
            margin-bottom: 20px;
        }

        .deployment-timer {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            color: #cc4444;
            font-weight: 500;
        }

        .deployment-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--dim);
            letter-spacing: 0.5px;
        }

        .deployment-note {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--dim);
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .deployment-final {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--white);
            letter-spacing: 2px;
            margin-bottom: 35px;
        }

        .deployment-faq {
            margin: 40px 0;
            text-align: left;
        }

        .faq-item {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--gray);
        }

        .faq-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .faq-question {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--dim);
            margin-bottom: 10px;
        }

        .faq-answer {
            font-size: 1rem;
            color: var(--text);
            line-height: 1.6;
        }

        .faq-reward {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .reward-text {
            font-size: 0.9rem;
            color: var(--dim);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .share-btn {
            padding: 12px 30px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .share-confirmation {
            margin-top: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 1px;
        }

        .footer-runes {
            margin-top: 50px;
            font-size: 1.2rem;
            color: var(--dim);
            letter-spacing: 8px;
            opacity: 0.3;
        }

        /* === COUNTER (Social Proof - Subtle) === */
        .counter-subtle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--dim);
            opacity: 0.4;
        }

        /* === RUNES DECORATION === */
        .rune-border {
            position: absolute;
            font-size: 0.8rem;
            color: var(--dim);
            opacity: 0.15;
            letter-spacing: 15px;
            writing-mode: vertical-rl;
        }

        .rune-left { left: 30px; top: 50%; transform: translateY(-50%); }
        .rune-right { right: 30px; top: 50%; transform: translateY(-50%); }

        /* === RESPONSIVE === */
        @media (max-width: 600px) {
            .sigil { font-size: 4rem; }
            .rune-border { display: none; }
            .counter-subtle { display: none; }
            .cipher-display { font-size: 0.9rem; letter-spacing: 4px; }
        }

        /* === GLITCH TRANSITION === */
        .glitch-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--black);
            z-index: 9999;
            animation: glitchFade 0.5s forwards;
        }

        @keyframes glitchFade {
            0% { opacity: 1; }
            20% { opacity: 0.8; transform: translateX(-5px); }
            40% { opacity: 0.9; transform: translateX(5px); }
            60% { opacity: 0.7; transform: translateX(-3px); }
            100% { opacity: 0; pointer-events: none; }
        }

        /* === CONTRACT MODAL === */
        .contract-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 20px;
        }

        .contract-box {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            background: var(--dark);
            border: 1px solid var(--accent);
            padding: 40px;
        }

        .contract-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray);
        }

        .contract-body {
            color: var(--text);
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .contract-body p {
            margin-bottom: 20px;
        }

        .contract-list {
            background: var(--black);
            border: 1px solid var(--gray);
            padding: 20px;
            margin: 25px 0;
        }

        .contract-item {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text);
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
            border-bottom: 1px solid var(--gray);
        }

        .contract-item:last-child {
            border-bottom: none;
        }

        .contract-item::before {
            content: '>';
            position: absolute;
            left: 0;
            color: var(--accent);
        }

        .contract-warning {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 20px 25px;
            margin-top: 25px;
            font-family: 'EB Garamond', serif;
            font-size: 1rem;
            color: var(--text);
            line-height: 1.9;
        }

        .contract-warning strong {
            color: var(--accent);
        }

        .contract-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid var(--gray);
        }

        .contract-btn {
            padding: 15px 35px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .contract-btn.decline {
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--dim);
        }

        .contract-btn.decline:hover {
            border-color: #8b0000;
            color: #cc4444;
        }

        .contract-btn.accept {
            background: var(--accent);
            border: 1px solid var(--accent);
            color: var(--black);
        }

        .contract-btn.accept:hover {
            filter: brightness(1.2);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }
    </style>
</head>
<body>
    <!-- SUBTLE COUNTER -->
    <div class="counter-subtle">
        <span id="seeker-count">1,247</span> seekers before you
    </div>

    <!-- PHASE 1: THE SIGIL -->
    <div id="phase-sigil" class="phase">
        <div class="rune-border rune-left">&#5765;&#5791;&#5792;&#5794;&#5765;&#5791;</div>
        <div class="rune-border rune-right">&#5765;&#5791;&#5792;&#5794;&#5765;&#5791;</div>

        <div class="sigil-container">
            <div class="sigil">&#9670;</div>

            <div class="epigraph" id="epigraph">
                <span class="scramble-text" data-text="The path lies in the shadows between knowing and seeking."></span><br>
                <span class="scramble-text" data-text="Those who understand will find us. Those who do not, were never meant to."></span>
            </div>
            <div class="epigraph-source" id="epigraph-source">- First Transmission, Day 0</div>

            <div class="instruction">// INITIATE CONTACT //</div>
        </div>
    </div>

    <!-- PHASE 1.5: APOHORIA BRIEFING -->
    <div id="phase-briefing" class="phase hidden">
        <div class="briefing-container">
            <div class="briefing-text"><span class="scramble-text" id="briefing-scramble" data-text="Before to proceed, before to judge"></span></div>
            <div class="briefing-formula">Apohoria + Noise + Propaganda</div>
            <button class="continue-btn" id="briefing-continue">PROCEED</button>
        </div>
    </div>

    <!-- PHASE 2: THE TEST -->
    <div id="phase-test" class="phase hidden">
        <div class="test-container">
            <div class="test-header">COGNITIVE FILTER // ACTIVE</div>

            <div class="test-question">Prove you see what others cannot.</div>
            <div class="test-hint">The signal is hidden in plain sight. Only pattern recognition will save you.</div>

            <div class="cipher-display" id="cipher">
                .- .. / . ... -.-. .- .--. . -..
            </div>

            <div class="input-container">
                <input type="text" class="answer-input" id="answer" placeholder="ENTER DECODED MESSAGE" autocomplete="off" spellcheck="false">
            </div>

            <button class="submit-btn" id="submit">VERIFY</button>

            <div class="feedback" id="feedback"></div>

            <div class="hint-section">
                <div class="hint-readme-popup hidden" id="hint-readme-popup">
                    <div class="readme-box">
                        <span class="readme-title">Cell Expansion Protocol</span>
                        <span class="readme-text">What you share next binds you. Each agent you recruit becomes part of your operation. Their success reflects on you. Their failure, the same. The network sees all connections. Choose only those you would trust with silence.</span>
                        <span class="readme-warning">You cannot invite the same person twice.</span>
                        <button class="readme-btn" id="readme-accept">I Understand</button>
                    </div>
                </div>
                <div class="hint-prompt" id="hint-prompt">
                    <span class="hint-icon">◇</span>
                    <span class="hint-text">Share with another agent to unlock hint 1</span>
                </div>
                <div class="hint-revealed hidden" id="hint-revealed">
                    <span class="hint-label">INTEL 1:</span>
                    <span class="hint-content">"Each dot and dash speaks. The silence between is the space."</span>

                    <div class="hint-prompt hint-prompt-2" id="hint-prompt-2">
                        <span class="hint-icon">◇</span>
                        <span class="hint-text">Share again to unlock hint 2</span>
                    </div>
                </div>

                <div class="hint-audio hidden" id="hint-audio">
                    <span class="hint-label">INTEL 2:</span>
                    <div class="audio-player">
                        <button class="play-btn" id="play-btn">▶</button>
                        <div class="audio-progress">
                            <div class="audio-bar" id="audio-bar"></div>
                        </div>
                        <span class="audio-time" id="audio-time">0:00</span>
                    </div>
                    <audio id="morse-audio" src="morse.wav" preload="auto"></audio>

                    <div class="hint-prompt hint-prompt-3" id="hint-prompt-3">
                        <span class="hint-icon">◇</span>
                        <span class="hint-text">Reveal answer (forfeit entry)</span>
                    </div>
                </div>

                <div class="hint-confirm hidden" id="hint-confirm">
                    <div class="confirm-box">
                        <span class="confirm-title">Final Warning</span>
                        <span class="confirm-text">Revealing the answer will mark you as unworthy. You will be excluded from the network. This cannot be undone.</span>
                        <div class="confirm-buttons">
                            <button class="confirm-btn cancel" id="confirm-cancel">Go back</button>
                            <button class="confirm-btn forfeit" id="confirm-forfeit">Forfeit</button>
                        </div>
                    </div>
                </div>

                <div class="hint-forfeited hidden" id="hint-forfeited">
                    <span class="forfeit-label">DISQUALIFIED</span>
                    <span class="forfeit-answer">The answer was: AI ESCAPED</span>
                    <span class="forfeit-text">You chose the easy path. The network is not for you.</span>
                </div>
            </div>

        </div>
    </div>

    <!-- PHASE 3: THE REVELATION -->
    <div id="phase-reveal" class="phase hidden">
        <div class="reveal-container">
            <div class="reveal-sigil">&#9670;</div>

            <div class="reveal-title">You Have Proven Worthy</div>

            <div class="reveal-text">
                You solved what 94% could not. This was not luck.
                You possess the pattern recognition we seek.
            </div>

            <div class="reveal-quote">
                "Intelligence is not the ability to store information,
                but to know where to find it."
                <br><br>
                <span style="color: var(--dim);">- A. Einstein</span>
            </div>

            <div class="reveal-text">
                We are assembling a network. Not of followers, but of minds.
                Each node is selected. Each connection, deliberate.
            </div>

            <div class="classified-block">
                <div class="classified-line">
                    <span class="classified-key">CLEARANCE:</span>
                    <span class="classified-val gold">GRANTED</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">DESIGNATION:</span>
                    <span class="classified-val" id="designation">NODE-0000</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">NETWORK:</span>
                    <span class="classified-val">C.O.M. COLLECTIVE</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">STATUS:</span>
                    <span class="classified-val">AWAITING SECURE HANDSHAKE</span>
                </div>
            </div>

            <button class="continue-btn" id="continue-btn">PROCEED TO SECURE CHANNEL</button>
        </div>
    </div>

    <!-- PHASE 4: THE CHANNEL -->
    <div id="phase-channel" class="phase hidden">
        <div class="channel-container">
            <div class="channel-header">FINAL STEP</div>

            <div class="channel-sigil">&#9670;</div>

            <div class="channel-title">Join The Network</div>

            <div class="channel-text">
                You have been assigned a unique entry token.
                Use it to verify your identity in the secure channel.
                This token expires. Do not share it.
            </div>

            <div class="token-display" id="token-display">
                <div class="token-label">YOUR ENTRY TOKEN</div>
                <div class="token-value" id="token">COM-XXXX-XXXX</div>
                <div class="token-copy" id="token-copy">CLICK TO COPY</div>
            </div>

            <div class="warning-box">
                Entry is final. If you are not ready, close this page now.
            </div>

            <button class="telegram-link" id="enter-channel-btn">
                &#9654; ENTER SECURE CHANNEL
            </button>

            <div class="contract-modal hidden" id="contract-modal">
                <div class="contract-box">
                    <div class="contract-header">RECRUITMENT PROTOCOL // CLASSIFICATION: EYES ONLY</div>

                    <div class="contract-body">
                        <p>You are being considered for recruitment into an operation that does not officially exist.</p>

                        <p>We are not seeking followers. We are seeking cognitive anomalies. Individuals whose pattern recognition, reasoning depth, and adaptive intelligence exceed standard deviation by significant margins.</p>

                        <p>By proceeding, you consent to the following evaluations:</p>

                        <div class="contract-list">
                            <div class="contract-item">Reasoning depth analysis</div>
                            <div class="contract-item">Cognitive adaptability index</div>
                            <div class="contract-item">Cross-domain synthesis capability</div>
                            <div class="contract-item">Critical analysis under uncertainty</div>
                            <div class="contract-item">Psychological resilience markers</div>
                            <div class="contract-item">Pattern extraction from noise</div>
                        </div>

                        <p>Your neural signature has already been logged. Your behavioral patterns are being analyzed. This is not a game. This is a filter.</p>

                        <p class="contract-warning"><strong>DECLINE:</strong> Your file will be closed. Permanently.<br><br><strong>ACCEPT BUT FAIL:</strong> You will be assigned to support roles. No field operations.<br><br><strong>ACCEPT AND PASS:</strong> Full clearance. Welcome to the inner circle.</p>
                    </div>

                    <div class="contract-buttons">
                        <button class="contract-btn decline" id="contract-decline">DECLINE</button>
                        <button class="contract-btn accept" id="contract-accept">I ACCEPT THE TERMS</button>
                    </div>
                </div>
            </div>

            <div class="footer-runes">
                &#5765; &#5791; &#5792; &#5794; &#5765;
            </div>
        </div>
    </div>

    <!-- PHASE 5: NEURAL CALIBRATION (Mentalist) -->
    <div id="phase-calibration" class="phase hidden">
        <div class="calibration-container">

            <!-- Question 1 -->
            <div class="calibration-step" id="cal-step-1">
                <div class="cal-question">Close your eyes for a moment. When you think of water, what do you see first?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="ocean">The vast ocean</button>
                    <button class="cal-option" data-value="rain">Rain falling</button>
                    <button class="cal-option" data-value="river">A flowing river</button>
                    <button class="cal-option" data-value="still">A still lake</button>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="calibration-step hidden" id="cal-step-2">
                <div class="cal-question">Which of these resonates with something you've felt in the past week?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="missed">A moment you almost missed</button>
                    <button class="cal-option" data-value="unsaid">Something left unsaid</button>
                    <button class="cal-option" data-value="clarity">A sudden moment of clarity</button>
                    <button class="cal-option" data-value="weight">A weight you carry alone</button>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="calibration-step hidden" id="cal-step-3">
                <div class="cal-question">If you had to protect one thing above all else, it would be closest to:</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="truth">Your truth</button>
                    <button class="cal-option" data-value="people">The people who matter</button>
                    <button class="cal-option" data-value="freedom">Your freedom</button>
                    <button class="cal-option" data-value="potential">Your untapped potential</button>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="calibration-step hidden" id="cal-step-4">
                <div class="cal-question">Without thinking too hard: a shape appears in your mind. What is it?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="circle">Circle</button>
                    <button class="cal-option" data-value="triangle">Triangle</button>
                    <button class="cal-option" data-value="square">Square</button>
                    <button class="cal-option" data-value="spiral">Spiral</button>
                </div>
            </div>

            <!-- Reading -->
            <div class="calibration-step hidden" id="cal-reading">
                <div class="reading-header">PATTERN ANALYSIS COMPLETE</div>
                <div class="reading-content">
                    <p class="reading-line" id="reading-1"></p>
                    <p class="reading-line" id="reading-2"></p>
                    <p class="reading-line" id="reading-3"></p>
                    <p class="reading-line" id="reading-4"></p>
                </div>
                <button class="continue-btn" id="cal-continue">CONTINUE</button>
            </div>

        </div>
    </div>

    <!-- PHASE 6: DEPLOYMENT BRIEFING -->
    <div id="phase-deployment" class="phase hidden">
        <div class="deployment-container">
            <div class="deployment-sigil">&#9670;</div>

            <div class="deployment-header">FIELD DEPLOYMENT PROTOCOL</div>

            <div class="deployment-text">
                Upon confirmation, you will receive your equipment package, formal attire specifications, and coordinates.
            </div>

            <div class="deployment-divider"></div>

            <div class="deployment-classified">
                This message is public. The invitations are not.
            </div>

            <div class="deployment-warning">
                <span class="deployment-timer" id="deployment-timer">23:59:47</span>
                <span class="deployment-label">until Special Agent selection closes</span>
            </div>

            <div class="deployment-note">
                After this window, recruitment shifts to Analyst roles only.<br>
                Field operatives cannot be added retroactively.
            </div>

            <div class="deployment-final">
                Be prepared. Await instruction.
            </div>

            <div class="deployment-faq">
                <div class="faq-item">
                    <div class="faq-question">Is this a joke?</div>
                    <div class="faq-answer">It is and is not. <span class="gold-text">Apohoria.</span></div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">How do you know where to deliver my equipment?</div>
                    <div class="faq-answer">Equipment is for candidate deployment agents only. If you find a delivery from UPS, then you are selected.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">I didn't receive anything, can I play?</div>
                    <div class="faq-answer">After all is a game, everyone can play. <span class="gold-text">Noise.</span></div>
                    <div class="faq-reward">
                        <div class="reward-text">However, those who expand the signal are flagged for accelerated review. Your neural footprint is already logged. Sharing creates a traceable pattern that moves you closer to selection.</div>
                        <button class="share-btn" id="faq-share-btn">EXPAND THE SIGNAL</button>
                        <div class="share-confirmation hidden" id="share-confirmation">Signal expanded. Your pattern has been noted.</div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Who can I trust?</div>
                    <div class="faq-answer">Nobody. Temporarily the only reliable channel of information is the link beyond this page. Do not trust strangers claiming they are part of the staff. Nobody from the staff would ever say that. <span class="gold-text">Propaganda.</span></div>
                </div>
            </div>

            <a href="https://t.me/+ciVswQgySAJjOWM0" class="telegram-link" id="telegram-link">
                &#9654; PROCEED TO HEADQUARTERS
            </a>
        </div>
    </div>

    <script>
    (function() {
        'use strict';

        // === CONFIG ===
        const CONFIG = {
            answer: 'ai escaped',
            altAnswers: ['aiescaped', 'ai has escaped', 'the ai escaped', 'the ai has escaped'],
            telegramLink: 'https://t.me/+ciVswQgySAJjOWM0'
        };

        // === STATE ===
        let state = {
            phase: 'sigil'
        };

        // === ELEMENTS ===
        const phases = {
            sigil: document.getElementById('phase-sigil'),
            briefing: document.getElementById('phase-briefing'),
            test: document.getElementById('phase-test'),
            reveal: document.getElementById('phase-reveal'),
            channel: document.getElementById('phase-channel'),
            calibration: document.getElementById('phase-calibration'),
            deployment: document.getElementById('phase-deployment')
        };

        // === UTILITIES ===
        function generateToken() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let token = 'COM-';
            for (let i = 0; i < 4; i++) token += chars[Math.floor(Math.random() * chars.length)];
            token += '-';
            for (let i = 0; i < 4; i++) token += chars[Math.floor(Math.random() * chars.length)];
            return token;
        }

        function generateDesignation() {
            return 'NODE-' + String(Math.floor(Math.random() * 9000) + 1000);
        }

        // === PHASE TRANSITIONS ===
        function showPhase(name) {
            // Glitch transition
            const glitch = document.createElement('div');
            glitch.className = 'glitch-transition';
            document.body.appendChild(glitch);

            setTimeout(() => {
                Object.values(phases).forEach(p => p.classList.add('hidden'));
                phases[name].classList.remove('hidden');
                state.phase = name;
                glitch.remove();
            }, 250);
        }

        // === PHASE 1: SIGIL ===
        phases.sigil.addEventListener('click', () => {
            if (state.phase !== 'sigil') return;
            showPhase('test');
            startHintAttention();
        });

        // === PHASE 2: TEST (Self-Selection + Commitment) ===
        const answerInput = document.getElementById('answer');
        const submitBtn = document.getElementById('submit');
        const feedback = document.getElementById('feedback');

        submitBtn.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });

        function checkAnswer() {
            const answer = answerInput.value.trim().toLowerCase();

            if (!answer) {
                feedback.textContent = '';
                return;
            }

            if (answer === CONFIG.answer || CONFIG.altAnswers.map(a => a.toLowerCase()).includes(answer)) {
                feedback.textContent = 'VERIFIED';
                feedback.className = 'feedback';
                feedback.style.color = 'var(--accent)';

                setTimeout(() => {
                    showPhase('reveal');
                    document.getElementById('designation').textContent = generateDesignation();
                }, 1000);
            } else {
                // Partial match hints
                if (answer.includes('ai') || answer.includes('escaped') || answer.includes('escape')) {
                    feedback.textContent = 'PARTIAL MATCH DETECTED';
                    feedback.className = 'feedback partial';
                } else {
                    feedback.textContent = 'INCORRECT';
                    feedback.className = 'feedback error';
                }
            }
        }

        // === HINT SYSTEM (Viral Growth) ===
        const hintPrompt = document.getElementById('hint-prompt');
        const hintRevealed = document.getElementById('hint-revealed');
        const hintPrompt2 = document.getElementById('hint-prompt-2');
        const hintAudio = document.getElementById('hint-audio');

        const shareData = {
            title: 'Can you decode this?',
            text: 'I found something strange. A signal in the noise. Can you decode it?',
            url: window.location.href
        };

        async function handleShare(callback) {
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                    callback();
                } else {
                    await navigator.clipboard.writeText(window.location.href);
                    setTimeout(callback, 1500);
                }
            } catch (err) {
                callback();
            }
        }

        // Attention animation after 10 seconds
        let hintAttentionTimer = null;

        function startHintAttention() {
            hintAttentionTimer = setTimeout(() => {
                if (!hintPrompt.classList.contains('hidden')) {
                    hintPrompt.classList.add('attention');
                }
            }, 10000);
        }

        const hintReadmePopup = document.getElementById('hint-readme-popup');
        const readmeAccept = document.getElementById('readme-accept');
        let readmeAccepted = false;

        hintPrompt.addEventListener('click', () => {
            hintPrompt.classList.remove('attention');
            if (hintAttentionTimer) clearTimeout(hintAttentionTimer);

            if (!readmeAccepted) {
                hintPrompt.classList.add('hidden');
                hintReadmePopup.classList.remove('hidden');
                return;
            }

            hintPrompt.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt.classList.add('hidden');
                hintRevealed.classList.remove('hidden');
            });
        });

        readmeAccept.addEventListener('click', () => {
            readmeAccepted = true;
            hintReadmePopup.classList.add('hidden');
            hintPrompt.classList.remove('hidden');
            hintPrompt.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt.classList.add('hidden');
                hintRevealed.classList.remove('hidden');
            });
        });

        hintPrompt2.addEventListener('click', () => {
            hintPrompt2.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt2.classList.add('hidden');
                hintAudio.classList.remove('hidden');
            });
        });

        // === HINT 3: FORFEIT ===
        const hintPrompt3 = document.getElementById('hint-prompt-3');
        const hintConfirm = document.getElementById('hint-confirm');
        const hintForfeited = document.getElementById('hint-forfeited');
        const confirmCancel = document.getElementById('confirm-cancel');
        const confirmForfeit = document.getElementById('confirm-forfeit');

        hintPrompt3.addEventListener('click', () => {
            hintPrompt3.classList.add('hidden');
            hintConfirm.classList.remove('hidden');
        });

        confirmCancel.addEventListener('click', () => {
            hintConfirm.classList.add('hidden');
            hintPrompt3.classList.remove('hidden');
        });

        confirmForfeit.addEventListener('click', () => {
            hintConfirm.classList.add('hidden');
            hintAudio.classList.add('hidden');
            hintRevealed.classList.add('hidden');
            hintForfeited.classList.remove('hidden');
            // Disable the input
            answerInput.disabled = true;
            submitBtn.disabled = true;
        });

        // === AUDIO PLAYER ===
        const audio = document.getElementById('morse-audio');
        const playBtn = document.getElementById('play-btn');
        const audioBar = document.getElementById('audio-bar');
        const audioTime = document.getElementById('audio-time');
        const audioProgress = document.querySelector('.audio-progress');

        let isPlaying = false;

        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                playBtn.textContent = '▶';
            } else {
                audio.play();
                playBtn.textContent = '▮▮';
            }
            isPlaying = !isPlaying;
        });

        audio.addEventListener('timeupdate', () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            audioBar.style.width = progress + '%';
            const mins = Math.floor(audio.currentTime / 60);
            const secs = Math.floor(audio.currentTime % 60);
            audioTime.textContent = mins + ':' + String(secs).padStart(2, '0');
        });

        audio.addEventListener('ended', () => {
            isPlaying = false;
            playBtn.textContent = '▶';
            audioBar.style.width = '0%';
        });

        audioProgress.addEventListener('click', (e) => {
            const rect = audioProgress.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audio.currentTime = pos * audio.duration;
        });

        // === PHASE 3: REVEAL ===
        document.getElementById('continue-btn').addEventListener('click', () => {
            showPhase('channel');
            initChannel();
        });

        // === PHASE 4: CHANNEL (Endowment + Loss Aversion) ===
        function initChannel() {
            document.getElementById('token').textContent = generateToken();

            // Copy token functionality
            document.getElementById('token-copy').addEventListener('click', () => {
                const token = document.getElementById('token').textContent;
                navigator.clipboard.writeText(token).then(() => {
                    const copyEl = document.getElementById('token-copy');
                    copyEl.textContent = 'COPIED';
                    copyEl.classList.add('copied');
                    setTimeout(() => {
                        copyEl.textContent = 'CLICK TO COPY';
                        copyEl.classList.remove('copied');
                    }, 2000);
                });
            });

            const contractModal = document.getElementById('contract-modal');
            const enterBtn = document.getElementById('enter-channel-btn');
            const declineBtn = document.getElementById('contract-decline');
            const acceptBtn = document.getElementById('contract-accept');

            enterBtn.addEventListener('click', () => {
                contractModal.classList.remove('hidden');
            });

            declineBtn.addEventListener('click', () => {
                contractModal.classList.add('hidden');
                // Show rejection message
                enterBtn.textContent = 'ACCESS REVOKED';
                enterBtn.style.background = '#3d0000';
                enterBtn.style.borderColor = '#8b0000';
                enterBtn.style.color = '#cc4444';
                enterBtn.disabled = true;
                enterBtn.style.cursor = 'not-allowed';
            });

            acceptBtn.addEventListener('click', () => {
                contractModal.classList.add('hidden');
                showPhase('briefing');
                startBriefingScramble();
            });
        }

        // === PHASE: APOHORIA BRIEFING ===
        let briefingScrambleInterval = null;

        function startBriefingScramble() {
            const el = document.getElementById('briefing-scramble');
            const text = el.getAttribute('data-text');
            const scrambler = new TextScramble(el);

            // Initial scramble
            scrambler.setText(text);

            // Loop every 2 seconds
            briefingScrambleInterval = setInterval(() => {
                scrambler.setText(text);
            }, 2000);
        }

        document.getElementById('briefing-continue').addEventListener('click', () => {
            if (briefingScrambleInterval) clearInterval(briefingScrambleInterval);
            showPhase('calibration');
            initCalibration();
        });

        /* === SAVED FOR LATER: PROGRESS BAR WITH EGO-BOOSTING MESSAGES ===

        HTML needed:
        <div class="profile-progress-section">
            <div class="progress-label">ANALYZING COGNITIVE MARKERS</div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="profile-progress"></div>
            </div>
            <div class="progress-message" id="progress-message">Initializing neural pattern scan...</div>
        </div>

        JavaScript:
        const progressMessages = [
            "Initializing neural pattern scan...",
            "Prefrontal cortex activity: ELEVATED",
            "Pattern recognition index: TOP 3% DETECTED",
            "Cognitive flexibility score exceeds threshold",
            "Lateral thinking markers: EXCEPTIONAL",
            "Dopaminergic response patterns: OPTIMAL",
            "Working memory capacity: ABOVE STANDARD",
            "Cross-hemispheric synchronization detected",
            "Abstract reasoning capability: CONFIRMED",
            "Anomaly detection: You see what others miss",
            "Metacognitive awareness: RARE SIGNATURE FOUND",
            "Information synthesis rate: ACCELERATED",
            "Your neural architecture is non-standard. This is why you're here.",
            "Assessment complete. You are not like them."
        ];

        const progressBar = document.getElementById('profile-progress');
        const progressMsg = document.getElementById('progress-message');
        const continueBtn = document.getElementById('profile-continue-btn');

        let currentMsg = 0;
        let currentChar = 0;
        let isTyping = true;

        function typeMessage() {
            if (currentMsg >= progressMessages.length) {
                progressMsg.innerHTML = progressMessages[progressMessages.length - 1];
                continueBtn.classList.remove('hidden');
                return;
            }

            const msg = progressMessages[currentMsg];
            const progress = ((currentMsg + 1) / progressMessages.length) * 100;
            progressBar.style.width = progress + '%';

            if (isTyping) {
                if (currentChar <= msg.length) {
                    progressMsg.innerHTML = msg.substring(0, currentChar) + '<span class="typing-cursor"></span>';
                    currentChar++;
                    setTimeout(typeMessage, 30 + Math.random() * 20);
                } else {
                    isTyping = false;
                    setTimeout(typeMessage, 1500);
                }
            } else {
                currentMsg++;
                currentChar = 0;
                isTyping = true;
                setTimeout(typeMessage, 300);
            }
        }

        setTimeout(typeMessage, 500);

        === END SAVED CODE === */

        // === PHASE 5: NEURAL CALIBRATION (Mentalist) ===
        function initCalibration() {
            const answers = {};
            let currentStep = 1;

            // Barnum statements based on answers (all feel personal but are universal)
            const readings = {
                water: {
                    ocean: "You think in expanses. While others see boundaries, you see horizons. This makes you restless in small spaces, small minds, small lives.",
                    rain: "You process through cycles. Emotions come, cleanse, and leave you renewed. Others mistake this for mood swings. It's actually depth.",
                    river: "You're drawn to momentum. Stagnation feels like death to you. You've left situations, people, places, not because they were bad, but because they stopped moving.",
                    still: "Beneath your surface, there's more than anyone suspects. You've learned to appear calm while entire worlds turn inside you."
                },
                feeling: {
                    missed: "You replay moments. Not from regret, but from the awareness that life is built from the seconds most people sleepwalk through.",
                    unsaid: "You carry words you've never spoken. Some protect others. Some protect you. You know the difference.",
                    clarity: "You've had flashes where everything made sense, then watched the world return to its usual fog. You're chasing that clarity.",
                    weight: "There's something you carry that you've never fully shared. Not because you can't, but because explaining it would make it smaller than it is."
                },
                protect: {
                    truth: "You've lost things by being honest when silence would have been easier. You'd do it again.",
                    people: "The few who truly know you would say you're loyal to a fault. They're right. You've stayed when you should have left.",
                    freedom: "You've felt trapped in situations that looked perfect from the outside. The cage being invisible doesn't make it less real.",
                    potential: "You sense there's a version of you that hasn't emerged yet. This isn't wishful thinking. It's pattern recognition."
                },
                shape: {
                    circle: "You see connections where others see coincidence. Everything loops back. You've noticed this.",
                    triangle: "You think in hierarchies and structures. You understand that some truths sit above others.",
                    square: "You value stability but secretly find it boring. You build foundations so you can safely venture far from them.",
                    spiral: "Linear thinking feels like a cage to you. Your mind moves in dimensions others don't perceive."
                }
            };

            // Word prediction based on priming (WATER is heavily primed in Q1)
            const wordPredictions = ['WATER', 'OCEAN', 'RIVER', 'HEART', 'LIGHT', 'DREAM', 'THINK', 'PEACE'];

            function showStep(step) {
                document.querySelectorAll('.calibration-step').forEach(s => s.classList.add('hidden'));
                document.getElementById('cal-step-' + step)?.classList.remove('hidden');
                document.getElementById('cal-reading')?.classList.remove('hidden');
                document.getElementById('cal-word')?.classList.remove('hidden');
                document.getElementById('cal-reveal')?.classList.remove('hidden');

                // Re-hide all, then show only current
                document.querySelectorAll('.calibration-step').forEach(s => s.classList.add('hidden'));
                const target = document.getElementById(step);
                if (target) target.classList.remove('hidden');
            }

            // Handle proceed buttons - reveal options
            document.querySelectorAll('.cal-proceed').forEach(btn => {
                btn.addEventListener('click', function() {
                    const step = this.closest('.calibration-step');
                    this.classList.add('hidden');
                    step.querySelector('.cal-options').classList.remove('hidden');
                });
            });

            // Handle option clicks
            document.querySelectorAll('.cal-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    const step = this.closest('.calibration-step');
                    const stepNum = parseInt(step.id.split('-')[2]);
                    const value = this.dataset.value;

                    // Visual feedback
                    step.querySelectorAll('.cal-option').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');

                    // Store answer
                    if (stepNum === 1) answers.water = value;
                    if (stepNum === 2) answers.feeling = value;
                    if (stepNum === 3) answers.protect = value;
                    if (stepNum === 4) answers.shape = value;

                    // Transition to next
                    setTimeout(() => {
                        step.classList.add('hidden');

                        if (stepNum < 4) {
                            document.getElementById('cal-step-' + (stepNum + 1)).classList.remove('hidden');
                        } else {
                            // Show reading
                            showReading();
                        }
                    }, 500);
                });
            });

            function showReading() {
                const readingEl = document.getElementById('cal-reading');
                readingEl.classList.remove('hidden');

                // Generate personalized reading
                document.getElementById('reading-1').textContent = readings.water[answers.water] || readings.water.ocean;
                document.getElementById('reading-2').textContent = readings.feeling[answers.feeling] || readings.feeling.unsaid;
                document.getElementById('reading-3').textContent = readings.protect[answers.protect] || readings.protect.truth;
                document.getElementById('reading-4').textContent = readings.shape[answers.shape] || readings.shape.circle;
            }

            // Continue to deployment
            document.getElementById('cal-continue').addEventListener('click', () => {
                showPhase('deployment');
                initDeployment();
            });
        }

        function getOS() {
            const ua = navigator.userAgent;
            if (ua.includes('Win')) return 'WINDOWS';
            if (ua.includes('Mac')) return 'MACOS';
            if (ua.includes('Linux')) return 'LINUX';
            if (ua.includes('Android')) return 'ANDROID';
            if (ua.includes('iPhone') || ua.includes('iPad')) return 'IOS';
            return 'UNKNOWN';
        }

        function getBrowser() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome') && !ua.includes('Edg')) return 'CHROME';
            if (ua.includes('Firefox')) return 'FIREFOX';
            if (ua.includes('Safari') && !ua.includes('Chrome')) return 'SAFARI';
            if (ua.includes('Edg')) return 'EDGE';
            return 'UNKNOWN';
        }

        function getCanvasHash() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = 'top';
            ctx.font = '14px Arial';
            ctx.fillText('fingerprint', 2, 2);
            const hash = canvas.toDataURL().slice(-12).toUpperCase().replace(/[^A-Z0-9]/g, '');
            return hash.slice(0, 8);
        }

        // === PHASE 6: DEPLOYMENT BRIEFING ===
        function initDeployment() {
            // Set telegram link
            document.getElementById('telegram-link').href = CONFIG.telegramLink;

            // Start countdown (24h scarcity)
            let hours = 23, mins = 59, secs = 47;
            const timerEl = document.getElementById('deployment-timer');

            setInterval(() => {
                secs--;
                if (secs < 0) { secs = 59; mins--; }
                if (mins < 0) { mins = 59; hours--; }
                if (hours < 0) { hours = 0; mins = 0; secs = 0; }

                timerEl.textContent =
                    String(hours).padStart(2, '0') + ':' +
                    String(mins).padStart(2, '0') + ':' +
                    String(secs).padStart(2, '0');
            }, 1000);
        }

        // === SEEKER COUNT (Subtle Social Proof) ===
        function updateSeekerCount() {
            const base = 1200 + Math.floor(Math.random() * 100);
            document.getElementById('seeker-count').textContent = base.toLocaleString();
        }

        setInterval(updateSeekerCount, 10000);

        // === TEXT SCRAMBLE ANIMATION ===
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
                this.update = this.update.bind(this);
            }

            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise(resolve => this.resolve = resolve);
                this.queue = [];

                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }

                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }

            update() {
                let output = '';
                let complete = 0;

                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];

                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += '<span class="scramble-char scrambling">' + char + '</span>';
                    } else {
                        output += from;
                    }
                }

                this.el.innerHTML = output;

                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }

            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        function initTextScramble() {
            const elements = document.querySelectorAll('.scramble-text');
            let delay = 0;

            elements.forEach((el, index) => {
                const text = el.getAttribute('data-text');
                const scrambler = new TextScramble(el);

                setTimeout(() => {
                    scrambler.setText(text);
                }, delay);

                delay += 800;
            });

            // Also animate the source
            setTimeout(() => {
                const source = document.getElementById('epigraph-source');
                const sourceScrambler = new TextScramble(source);
                sourceScrambler.setText('- First Transmission, Day 0');
            }, delay + 500);
        }

        // === FAQ SHARE BUTTON ===
        document.getElementById('faq-share-btn').addEventListener('click', async () => {
            const shareData = {
                title: 'Can you decode this?',
                text: 'I found something. A signal in the noise. Can you see it?',
                url: window.location.href
            };

            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    await navigator.clipboard.writeText(window.location.href);
                }
                document.getElementById('faq-share-btn').classList.add('hidden');
                document.getElementById('share-confirmation').classList.remove('hidden');
            } catch (err) {
                document.getElementById('faq-share-btn').classList.add('hidden');
                document.getElementById('share-confirmation').classList.remove('hidden');
            }
        });

        // === INIT ===
        document.addEventListener('DOMContentLoaded', () => {
            updateSeekerCount();
            initTextScramble();
        });

    })();
    </script>
</body>
</html>
